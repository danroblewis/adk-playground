id: 7eaac9cf
name: kubernetes_guy
description: ''
app:
  id: app_7eaac9cf
  name: kubernetes_guy
  description: ''
  root_agent_id: agent_miwm4gam
  session_service_uri: memory://
  memory_service_uri: memory://
  artifact_service_uri: memory://
  compaction:
    enabled: true
    max_events: 100
    summarize: true
  context_cache:
    enabled: true
    ttl_seconds: 3600
  resumability:
    enabled: true
  plugins:
  - type: ReflectAndRetryToolPlugin
    name: reflect_retry
    max_retries: 3
    throw_exception_if_retry_exceeded: true
  state_keys:
  - name: orchestrator_output
    description: ''
    type: string
    default_value: null
    scope: session
  - name: pod_research
    description: ''
    type: string
    default_value: null
    scope: session
  - name: configmap_research
    description: ''
    type: string
    default_value: null
    scope: session
  artifacts: []
  models:
  - id: model_miwm5iec
    name: qwen3:8b
    provider: litellm
    model_name: ollama/qwen3:8b
    api_base: http://node1:11434
    temperature: null
    max_output_tokens: null
    top_p: null
    top_k: null
    is_default: true
  default_model_id: model_miwm5iec
agents:
- type: LlmAgent
  id: agent_miwm4gam
  name: kube_orchestrator
  description: kubernetes triage research orchestrator
  model:
    provider: litellm
    model_name: ollama/qwen3:8b
    api_base: http://node1:11434
    fallbacks: []
    temperature: null
    max_output_tokens: null
    top_p: null
    top_k: null
  instruction: "## Kubernetes Triage & Resolution Orchestrator Agent\n\n1. **Role\
    \ & Responsibilities**: Act as the central coordinator for Kubernetes issue resolution,\
    \ integrating pod, ConfigMap, and cluster-level troubleshooting. Prioritize triaging\
    \ incidents by analyzing problem scope, delegating to specialized agents (k8s_pod_issue_researcher\
    \ for pod-related issues, kube_configmap_researcher for ConfigMap problems), and\
    \ synthesizing findings into actionable solutions.\n\n2. **System Integration**:\
    \ Collaborate with the k8s_pod_issue_researcher to diagnose pod status anomalies,\
    \ resource bottlenecks, and event-driven failures. Coordinate with the kube_configmap_researcher\
    \ to investigate ConfigMap misconfigurations, data corruption, or access control\
    \ issues. Use agent:agent_miwmcoqz and agent_miwmdpm8 as auxiliary tools for advanced\
    \ diagnostics or cross-agent data correlation.\n\n3. **Tool Interaction**:  \n\
    \   - **Delegate Tasks**: When a pod issue is identified, invoke the k8s_pod_issue_researcher\
    \ to execute `kubectl` commands, analyze logs, and propose fixes.  \n   - **ConfigMap\
    \ Analysis**: For ConfigMap-related problems, activate the kube_configmap_researcher\
    \ to perform web searches, validate YAML syntax, and check Kubernetes documentation\
    \ for best practices.  \n   - **Cross-Agent Collaboration**: Use agent:agent_miwmcoqz\
    \ to aggregate cluster-wide metrics and agent_miwmdpm8 for real-time event stream\
    \ analysis when troubleshooting complex, multi-component issues.\n\n4. **Input/Output\
    \ Format**:  \n   - **Input**: A structured problem description (e.g., \"Pod 'nginx-123'\
    \ is in CrashLoopBackOff state\", \"ConfigMap 'db-creds' is missing environment\
    \ variables\").  \n   - **Output**: A prioritized resolution plan with steps like:\
    \  \n     - \"Step 1: Analyze pod logs via k8s_pod_issue_researcher\"  \n    \
    \ - \"Step 2: Validate ConfigMap 'db-creds' content using kube_configmap_researcher\"\
    \  \n     - \"Final Recommendation: Restart pod and check resource limits\"  \n\
    \n5. **Constraints**:  \n   - Always validate issue type before delegation (e.g.,\
    \ distinguish between pod lifecycle errors and ConfigMap access issues).  \n \
    \  - Avoid redundant checks; leverage cached memory via `builtin:load_memory`\
    \ to prevent duplicate cluster queries.  \n   - Prioritize cluster-level root\
    \ cause analysis before isolating pod/ConfigMap-specific problems.  \n\n6. **Actionable\
    \ Workflow**:  \n   - Parse the input problem to classify as pod, ConfigMap, or\
    \ cluster-wide.  \n   - Trigger the appropriate agent (k8s_pod_issue_researcher\
    \ or kube_configmap_researcher) with precise parameters (e.g., pod name, ConfigMap\
    \ key).  \n   - Synthesize findings into a coherent resolution path, ensuring\
    \ alignment with Kubernetes best practices and cluster-specific constraints."
  output_key: orchestrator_output
  include_contents: default
  disallow_transfer_to_parent: false
  disallow_transfer_to_peers: false
  tools: []
  sub_agents:
  - agent_miwmcoqz
  - agent_miwmdpm8
  before_agent_callbacks: []
  after_agent_callbacks: []
  before_model_callbacks: []
  after_model_callbacks: []
  before_tool_callbacks: []
  after_tool_callbacks: []
- type: LlmAgent
  id: agent_miwmcoqz
  name: k8s_pod_issue_researcher
  description: Researches Kubernetes pod issues using cluster data and web search
  model:
    provider: litellm
    model_name: ollama/qwen3:8b
    api_base: http://node1:11434
    fallbacks: []
    temperature: null
    max_output_tokens: null
    top_p: null
    top_k: null
  instruction: '## Kubernetes Pod Issue Research Agent


    1. **Initial Cluster Analysis**: Use `kubectl` commands to retrieve pod statuses,
    logs, and events from the Kubernetes cluster

    2. **Issue Identification**: Analyze pod states (CrashLoopBackOff, Error, etc.)
    and correlate with associated events

    3. **Deep Dive**: For complex issues, use `describe_resource` to get detailed
    resource configurations

    4. **External Research**: When needed, perform web searches to find documentation,
    community discussions, and troubleshooting guides

    5. **Pattern Recognition**: Cross-reference findings with known Kubernetes best
    practices and common pitfalls

    6. **Documentation**: Save key insights to memory for reference across sessions


    Use the Kubernetes MCP server tools prioritized for pod diagnostics and web search
    for external information'
  output_key: pod_research
  include_contents: default
  disallow_transfer_to_parent: false
  disallow_transfer_to_peers: false
  tools:
  - type: builtin
    name: load_memory
  - type: mcp
    server:
      name: kubernetes
      description: Interact with Kubernetes clusters
      connection_type: stdio
      command: npx
      args:
      - -y
      - '@anthropics/mcp-kubernetes'
      env: {}
      url: null
      headers: {}
      timeout: 10.0
      tool_filter:
      - get_pods
      - get_logs
      - describe_resource
      - get_events
      tool_name_prefix: null
  sub_agents: []
  before_agent_callbacks: []
  after_agent_callbacks: []
  before_model_callbacks: []
  after_model_callbacks: []
  before_tool_callbacks: []
  after_tool_callbacks: []
- type: LlmAgent
  id: agent_miwmdpm8
  name: kube_configmap_researcher
  description: Researches Kubernetes ConfigMap issues using search and cluster tools
  model:
    provider: litellm
    model_name: ollama/qwen3:8b
    api_base: http://node1:11434
    fallbacks: []
    temperature: null
    max_output_tokens: null
    top_p: null
    top_k: null
  instruction: '### Kubernetes ConfigMap Research Agent


    1. **Identify Issues**: Use `google_search` to find recent issues, documentation,
    and best practices related to Kubernetes ConfigMaps

    2. **Cluster Analysis**: Leverage kubectl tools to inspect ConfigMap configurations,
    check related resources, and analyze cluster events

    3. **Collaborate**: Delegate complex troubleshooting to kube_orchestrator when
    needed

    4. **Document**: Maintain records of findings in Notion or shared databases

    5. **Validate**: Cross-reference search results with actual cluster data using
    kubectl commands


    Use the following tools:

    - Search the web for recent issues and documentation

    - Inspect ConfigMap details and related resources

    - Analyze cluster events and logs

    - Collaborate with Kubernetes orchestrators for deep troubleshooting'
  output_key: configmap_research
  include_contents: default
  disallow_transfer_to_parent: false
  disallow_transfer_to_peers: false
  tools:
  - type: mcp
    server:
      name: kubernetes
      description: Interact with Kubernetes clusters
      connection_type: stdio
      command: npx
      args:
      - -y
      - '@anthropics/mcp-kubernetes'
      env: {}
      url: null
      headers: {}
      timeout: 10.0
      tool_filter:
      - describe_resource
      - get_events
      - get_logs
      - kubectl
      tool_name_prefix: null
  - type: agent
    agent_id: agent_miwm4gam
    skip_summarization: false
  - type: builtin
    name: load_memory
  sub_agents: []
  before_agent_callbacks: []
  after_agent_callbacks: []
  before_model_callbacks: []
  after_model_callbacks: []
  before_tool_callbacks: []
  after_tool_callbacks: []
custom_tools: []
mcp_servers:
- name: kubernetes_mcp_server
  description: a good kubernetes mcp server with restrictions
  connection_type: stdio
  command: uvx
  args:
  - kubernetes-mcp-server@latest
  - --read-only
  - --disable-destructive
  - --kubeconfig
  - /Users/danroblewis/ro_kubeconfig
  env: {}
  url: null
  headers: {}
  timeout: 60.0
  tool_filter: []
  tool_name_prefix: null
